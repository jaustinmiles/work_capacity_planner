#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run type checking and linting before push
echo "🔍 Running pre-push checks..."

# Run TypeScript check
echo "📐 Checking TypeScript..."
npm run typecheck || {
  echo "❌ TypeScript check failed. Please fix errors before pushing."
  exit 1
}

# Run ESLint in quiet mode (only show errors, not warnings)
echo "🔍 Running ESLint check (errors only)..."
npx eslint . --quiet || {
  echo "❌ ESLint found errors. Please fix them before pushing."
  echo "To see all warnings too, run: npm run lint"
  exit 1
}

echo "✅ Pre-push checks passed!"